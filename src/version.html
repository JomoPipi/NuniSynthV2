<!DOCTYPE html>
<html>
<head>
  <title>NuniSynth Update Sage</title>
</head>
<body>
  <div style="border-bottom:blue"> Current version: </div>
  <span id="version" style="color:purple;font-size:20px">vX.Y.Z</span>
  <div id="container">
    <div id='downloadMessages'>
      <div id="progressBar"></div>
      <span id="downloadMessagesText"></span>
    </div>
  </div>
  <style>
    #progressBar {
      /* background-color: #bfb; */
      background-color: transparent;
      width: 0px;
      position: absolute;
      top: 0;
      left: 0;
      height: 100%;
      /* border: 2px solid red; */
      backdrop-filter: hue-rotate(180deg);
      box-shadow: 0px 0px 3px 1px rgba(89, 0, 255, 0.432);
    }
    #downloadMessages {
      /* border: 1px solid purple; */
      background-color: #fbb;
      position: relative;
      padding: 4px;
      border-radius: 3px;
      margin-top: 10px;
      display: none;
    }
  </style>
<script>
// Display the current version
const version = window.location.hash.substring(1);
document.getElementById('version').innerText = version;

function update(percent) {
  console.log('p =',percent)
  progressBar.style.width = percent + '%'
  // downloadMessages.style.background = 
  // `linear-gradient(0.25turn, #bfb ${percent}%, #fbb ${100 - percent}%)`
}
container.appendChild(downloadMessages)
// Listen for messages
const { ipcRenderer } = require('electron');
ipcRenderer.on('message', function(event, text) {
  if (Array.isArray(text) && text[0].startsWith("Download speed: "))
  {
    const [str, percent] = text
    downloadMessagesText.innerText = str
    downloadMessages.style.display = 'block'
    update(percent)
  }
  else
  {
    console.log('message =',text)
    const message = document.createElement('div');
    message.innerText = text;
    container.appendChild(message);
  }
})
</script>
</body>
</html>
<!-- <div class="keyboard">
  
  <div class="keyboard__row">
      <div class="key--double" data-key="192"></div>
      <div class="key--double" data-key="49">
          <div>!</div>
          <div>1</div>
      </div>
      <div class="key--double" data-key="50">
          <div>@</div>
          <div>2</div>
      </div>
      <div class="key--double" data-key="51">
          <div>#</div>
          <div>3</div>
      </div>
      <div class="key--double" data-key="52">
          <div>$</div>
          <div>4</div>
      </div>
      <div class="key--double" data-key="53">
          <div>%</div>
          <div>5</div>
      </div>
      <div class="key--double" data-key="54">
          <div>^</div>
          <div>6</div>
      </div>
      <div class="key--double" data-key="55">
          <div>&</div>
          <div>7</div>
      </div>
      <div class="key--double" data-key="56">
          <div>*</div>
          <div>8</div>
      </div>
      <div class="key--double" data-key="57">
          <div>(</div>
          <div>9</div>
      </div>
      <div class="key--double" data-key="48">
          <div>)</div>
          <div>0</div>
      </div>
      <div class="key--double" data-key="189">
          <div>_</div>
          <div>-</div>
      </div>
      <div class="key--double" data-key="187">
          <div>+</div>
          <div>=</div>
      </div>
      <div class="key--bottom-right key--word key--w4" data-key="8"></div>
  </div>
  <br>
  <div class="keyboard__row">
      <div class="key--bottom-left key--word key--w4" data-key="9"></div>
      <div class="key--letter" data-char="Q">Q</div>
      <div class="key--letter" data-char="W">W</div>
      <div class="key--letter" data-char="E">E</div>
      <div class="key--letter" data-char="R">R</div>
      <div class="key--letter" data-char="T">T</div>
      <div class="key--letter" data-char="Y">Y</div>
      <div class="key--letter" data-char="U">U</div>
      <div class="key--letter" data-char="I">I</div>
      <div class="key--letter" data-char="O">O</div>
      <div class="key--letter" data-char="P">P</div>
      <div class="key--double" data-key="219" data-char="{[">
          <div>{</div>
          <div>[</div>
      </div>
      <div class="key--double" data-key="221" data-char="}]">
          <div>}</div>
          <div>]</div>
      </div>
      <div class="key--double" data-key="220" data-char="|"></div>
  </div>
  <br>
  <div class="keyboard__row">
      <div class="key--bottom-left key--word key--w5" data-key="20"></div>
      <div class="key--letter" data-char="A">A</div>
      <div class="key--letter" data-char="S">S</div>
      <div class="key--letter" data-char="D">D</div>
      <div class="key--letter" data-char="F">F</div>
      <div class="key--letter" data-char="G">G</div>
      <div class="key--letter" data-char="H">H</div>
      <div class="key--letter" data-char="J">J</div>
      <div class="key--letter" data-char="K">K</div>
      <div class="key--letter" data-char="L">L</div>
      <div class="key--double" data-key="186">
          <div>:</div>
          <div>;</div>
      </div>
      <div class="key--double" data-key="222">
          <div>"</div>
          <div>'</div>
      </div>
      <div class="key--bottom-right key--word key--w5" data-key="13"></div>
  </div>
  <br>
  <div class="keyboard__row">
      <div class="key--bottom-left key--word key--w6" data-key="16"></div>
      <div class="key--letter" data-char="Z">Z</div>
      <div class="key--letter" data-char="X">X</div>
      <div class="key--letter" data-char="C">C</div>
      <div class="key--letter" data-char="V">V</div>
      <div class="key--letter" data-char="B">B</div>
      <div class="key--letter" data-char="N">N</div>
      <div class="key--letter" data-char="M">M</div>
      <div class="key--double" data-key="188">
          <div>&lt;</div>
          <div>,</div>
      </div>
      <div class="key--double" data-key="190">
          <div>&gt;</div>
          <div>.</div>
      </div>
      <div class="key--double" data-key="191">
          <div>?</div>
          <div>/</div>
      </div>
      <div class="key--bottom-right key--word key--w6" data-key="16-R"></div>
  </div>
</div> -->